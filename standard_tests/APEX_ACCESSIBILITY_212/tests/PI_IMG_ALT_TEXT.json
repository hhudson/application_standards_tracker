[{"STANDARD_ID":2,"TEST_ID":619768750422061431861061984385821859,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Page items with html images have alt text","TEST_CODE":"PI_IMG_ALT_TEXT","STANDARD_NAME":"Accessibility","ACTIVE_YN":"Y","NT_NAME":"V_SVT_APEX__0_NT","QUERY_CLOB":"with std as (select case\r\n                    when display_as = 'Display Image'\r\n                    then case when attribute_01 = 'DB_COLUMN' \r\n                              and trim(attribute_03) is null\r\n                              then 'N'\r\n                              when attribute_01 = 'SQL' \r\n                              and ((coalesce((length(lower(html_form_element_attributes)) - length(replace(lower(html_form_element_attributes),'<img',null)))/4, length(lower(html_form_element_attributes)), 0) > \r\n                                  coalesce((length(lower(html_form_element_attributes)) - length(replace(lower(html_form_element_attributes),'alt=\"',null)))/5, length(lower(html_form_element_attributes)), 0)) \r\n                                  or lower(replace(html_form_element_attributes,' ','')) like '%alt=\"\"%' \r\n                                  or lower(html_form_element_attributes) like '% alt %' \r\n                                  or trim(html_form_element_attributes) is null)\r\n                              then 'N'\r\n                              when attribute_01 = 'URL' \r\n                              and trim(attribute_02) is null\r\n                              then 'N'\r\n                              else 'Y'\r\n                              end \r\n                    when lower(item_source) like '%<img%'\r\n                    then case when (coalesce((length(lower(item_source)) - length(replace(lower(item_source),'<img',null)))/4, length(lower(item_source)), 0) > \r\n                                  coalesce((length(lower(item_source)) - length(replace(lower(item_source),'alt=\"',null)))/5, length(lower(item_source)), 0))\r\n                              or lower(replace(item_source,' ','')) like '%alt=\"\"%' \r\n                              or lower(item_source) like '% alt %'\r\n                              then 'N'\r\n                              else 'Y'\r\n                              end\r\n                    when lower(pre_element_text) like '%<img%'\r\n                    then case when (coalesce((length(lower(pre_element_text)) - length(replace(lower(pre_element_text),'<img',null)))/4, length(lower(pre_element_text)), 0) > \r\n                                  coalesce((length(lower(pre_element_text)) - length(replace(lower(pre_element_text),'alt=\"',null)))/5, length(lower(pre_element_text)), 0)) \r\n                              or lower(replace(pre_element_text,' ','')) like '%alt=\"\"%' \r\n                              or lower(pre_element_text) like '% alt %'\r\n                              then 'N'\r\n                              else 'Y'\r\n                              end\r\n                    when lower(post_element_text) like '%<img%'\r\n                    then case when (coalesce((length(lower(post_element_text)) - length(replace(lower(post_element_text),'<img',null)))/4, length(lower(post_element_text)), 0) > \r\n                                  coalesce((length(lower(post_element_text)) - length(replace(lower(post_element_text),'alt=\"',null)))/5, length(lower(post_element_text)), 0)) \r\n                              or lower(replace(post_element_text,' ','')) like '%alt=\"\"%' \r\n                              or lower(post_element_text) like '% alt %'\r\n                              then 'N'\r\n                              else 'Y'\r\n                              end\r\n                    else 'Y'\r\n                    end pass_yn, \r\n                    html_form_element_attributes src,\r\n                    application_id,\r\n                    page_id,\r\n                    item_id,\r\n                    workspace,\r\n                    attribute_01,\r\n                    html_form_element_attributes,\r\n                    attribute_03,\r\n                    attribute_02,\r\n                    item_source,\r\n                    pre_element_text,\r\n                    post_element_text,\r\n                    display_as,\r\n                    html_table_cell_attr_element\r\n                from apex_application_page_items)\r\nselect std.pass_yn,                          \r\n       aapi.application_id, \r\n       aapi.page_id,\r\n       null created_by,\r\n       null created_on,\r\n       aapi.last_updated_by,\r\n       aapi.last_updated_on,\r\n       apex_string.format('%4 Page Item `%0` (app %1, page %2) has an image with missing alt text (`%3`) [Based on : `%5`, alt text : `%6`]', \r\n        p0 => aapi.item_name, \r\n        p1 => aapi.application_id,\r\n        p2 => aapi.page_id,\r\n        p3 => std.src,\r\n        p4 => std.display_as,\r\n        p5 => std.attribute_01,\r\n        p6 => std.attribute_02\r\n        ) validation_failure_message,\r\n       apex_string.format('Page Item `%0` (app %1, page %2) has an image with missing alt text', \r\n        p0 => aapi.item_name, \r\n        p1 => aapi.application_id,\r\n        p2 => aapi.page_id) issue_title,\r\n       aapi.item_id component_id,\r\n       null parent_component_id,\r\n       aapi.item_name,\r\n       std.src,\r\n       std.workspace,\r\n       std.attribute_01 based_on,\r\n       std.html_form_element_attributes custom_attributes,\r\n       std.attribute_03,\r\n       std.attribute_02 alternative_text,\r\n       std.item_source,\r\n       std.pre_element_text,\r\n       std.post_element_text,\r\n       std.display_as,\r\n       std.html_table_cell_attr_element column_attributes\r\nfrom std\r\ninner join apex_application_page_items aapi on std.application_id = aapi.application_id\r\n                                            and std.page_id = aapi.page_id \r\n                                            and std.item_id = aapi.item_id\r\ninner join apex_application_pages aap on aap.page_id = aapi.page_id and aap.application_id = aapi.application_id\r\nleft outer join apex_application_build_options aabo1 on aabo1.build_option_name = aap.build_option\n                                                     and aabo1.application_id = aap.application_id\r\nleft outer join apex_application_build_options aabo2 on aabo2.build_option_name = aapi.build_option\n                                                     and aabo2.application_id = aapi.application_id\r\nwhere std.workspace = svt_preferences.get_preference ('SVT_DEFAULT_WORKSPACE')\r\nand coalesce(aabo1.status_on_export,'NA') != 'Exclude'\r\nand coalesce(aabo2.status_on_export,'NA') != 'Exclude'","STD_UPDATED_DATE":"2023-09-12T19:33:59.490265Z","SRC_RECENT_CHANGE_YN":"N","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":7,"COMPONENT_NAME":"APEX_APPLICATION_PAGE_ITEMS","EXPLANATION":"WCAG 2.0/2.1 - 1.1.1\r\n\r\nsearching images and if they have alt text set in html","FIX":"If the Page Item is of type 'Display Image':\r\n\r\n*   if it is `based on` a `Image URL stored in Page Item Value` or `BLOB Column specified in Item Source` , you must supply a title + an aria-label to the `Alternative Text` (under settings) attribute","VERSION_NUMBER":1,"DISPLAY_SEQUENCE":160,"WORKSPACE":"REDWOOD"}]    
