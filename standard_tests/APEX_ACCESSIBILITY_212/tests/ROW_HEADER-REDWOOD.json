{"std_test":{"standard":{"standard_id":2,"standard_name":"Accessibility","description":"These are standards to maintain Accessibility.","compatibility_mode_id":1,"created":"2023-04-12T00:12:01.456000Z","created_by":"AST","updated":"2023-04-12T00:12:01.456000Z","updated_by":"AST"}},"test":[{"test_id":312153571812426193655816434380775773898,"test_name":"Reports should have Row Headers","standard_id":2,"display_sequence":140,"query_clob":"with rpt_cols as (\r\n       select pic.application_id, \r\n              pic.page_id, \r\n              pic.region_name, \r\n              pic.use_as_row_header,\r\n              pic.region_id, \r\n              'IR' report_type,\r\n              pic.created_by,\r\n              pic.created_on,\r\n              pic.updated_by,\r\n              pic.updated_on,\r\n              pic.column_id,\r\n              pic.workspace,\r\n              pic.build_option\r\n       from v_apex_application_page_ir_col pic\r\n       union all\r\n       select pig.application_id, \r\n              pig.page_id, \r\n              pig.region_name, \r\n              pig.use_as_row_header,\r\n              pig.region_id, \r\n              'IG' report_type,\r\n              null created_by,\r\n              null created_on,\r\n              pig.last_updated_by,\r\n              pig.last_updated_on,\r\n              pig.column_id,\r\n              pig.workspace,\r\n              pig.build_option\r\n       from apex_appl_page_ig_columns pig \r\n       union all\r\n       select prc.application_id, \r\n              prc.page_id, \r\n              prc.region_name, \r\n              prc.use_as_row_header,\r\n              prc.region_id, \r\n              'C' report_type,\r\n              null created_by,\r\n              null created_on,\r\n              prc.last_updated_by,\r\n              prc.last_updated_on,\r\n              prc.region_report_column_id,\r\n              prc.workspace,\r\n              prc.build_option\r\n       from apex_application_page_rpt_cols prc \r\n       where column_is_hidden = 'No'\r\n),\r\nrpt_cols_fm as (\r\n       select rc.application_id, \r\n              rc.page_id, \r\n              rc.region_name, \r\n              rc.use_as_row_header,\r\n              rc.region_id, \r\n              rc.report_type,\r\n              apex_string.format(\r\n              p_message => q'^`%0` is missing a row header (App : %1, Page : %2, Region id : %3). Regions that support row headers should have a column with the \"Use as Row Header\" attribute set to Yes for accessibility reasons.^',\r\n              p0 => rc.region_name,\r\n              p1 => rc.application_id,\r\n              p2 => rc.page_id,\r\n              p3 => rc.region_id\r\n              ) validation_failure_message,\r\n              apex_string.format(\r\n              p_message => '`%0` is missing a row header (app %1, page %2, region id %3)',\r\n              p0 => rc.region_name,\r\n              p1 => rc.application_id,\r\n              p2 => rc.page_id,\r\n              p3 => rc.region_id\r\n              ) issue_title,\r\n              app.created_by,\r\n              app.created_on,\r\n              coalesce(pr.last_updated_by, app.last_updated_by) last_updated_by, \r\n              coalesce(pr.last_updated_on, app.last_updated_on) last_updated_on,\r\n              rc.column_id,\r\n              rc.workspace\r\n       from rpt_cols rc \r\n       inner join apex_application_page_regions pr on  pr.region_id = rc.region_id\r\n                                                   and pr.page_id = rc.page_id \r\n                                                   and pr.application_id = rc.application_id\r\n                                                   and coalesce(pr.condition_type_code,'NA') != 'NEVER'\r\n       inner join apex_application_pages app on  app.page_id        = rc.page_id\r\n                                             and app.application_id = rc.application_id\r\n       inner join  apex_applications aa on  rc.application_id     = aa.application_id\r\n                                          and aa.availability_status != 'Unavailable'\r\n       left outer join apex_application_build_options aabo1 on  aabo1.build_option_name = app.build_option\r\n                                                            and aabo1.application_id = app.application_id\r\n       left outer join apex_application_build_options aabo2 on  aabo2.build_option_name = rc.build_option\r\n                                                            and aabo2.application_id = rc.application_id\r\n       where coalesce(aabo1.status_on_export,'NA') != 'Exclude'\r\n       and   coalesce(aabo2.status_on_export,'NA') != 'Exclude'\r\n)\r\nselect case when count(case when rcf.use_as_row_header = 'Yes'\r\n                            then 'x'\r\n                            when rcf.use_as_row_header = 'Y'\r\n                            then 'x'\r\n                            end) > 0\r\n            then 'Y'\r\n            else 'N'\r\n            end  pass_yn,\r\n       rcf.application_id, \r\n       rcf.page_id, \r\n       rcf.region_name, \r\n       rcf.region_id,\r\n       rcf.report_type,\r\n       rcf.created_by,\r\n       rcf.created_on,\r\n       rcf.last_updated_by, \r\n       rcf.last_updated_on,\r\n       rcf.validation_failure_message,\r\n       rcf.issue_title,\r\n       apr.report_template,\r\n       rcf.region_id component_id,\r\n       null parent_component_id,\r\n       rcf.workspace\r\nfrom rpt_cols_fm rcf\r\ninner join apex_application_page_regions apr on rcf.region_id = apr.region_id\r\n                                             and coalesce(apr.report_template ,'NA') not in ('List Item')\r\n                                             and apr.workspace = svt_preferences.get_preference ('SVT_DEFAULT_WORKSPACE')\r\ngroup by rcf.application_id, \r\n         rcf.page_id, \r\n         rcf.region_name, \r\n         rcf.region_id,\r\n         rcf.report_type,\r\n         rcf.created_by,\r\n         rcf.created_on,\r\n         rcf.last_updated_by, \r\n         rcf.last_updated_on,\r\n         rcf.validation_failure_message,\r\n         rcf.issue_title,\r\n         apr.report_template,\r\n         rcf.workspace","test_code":"ROW_HEADER","level_id":319367883342218894314577550181439009696,"mv_dependency":null,"svt_component_type_id":5,"explanation":"One or more columns must have \"Value Identifies Row\" switched on so that screen readers can better describe individual records of a table.\r\n\r\nThis test is tied to the following WCAG Codes :\r\n\r\n1.  1.1.1(A) : Non-text Content:  \r\n    All non-text content that is presented to the user has a text alternative that serves the equivalent purpose, except for the situations listed below.\r\n2.  1.3.1(A) : Info and Relationships : Information, structure, and relationships conveyed through presentation can be programmatically determined or are available in text.\r\n3.  1.3.2(A) : Meaningful Sequence : When the sequence in which content is presented affects its meaning, a correct reading sequence can be programmatically determined.","fix":"At the column level of your report, toggle on \"Value Identifies Row\" for many columns is appropriate to uniquely describe the record in human-friendly terms.","version_number":1.1,"version_db":"REDWOOD"}]}    
