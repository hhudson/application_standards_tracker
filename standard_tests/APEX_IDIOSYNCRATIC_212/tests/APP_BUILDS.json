[{"STANDARD_ID":335371825641905585121080132445374054310,"TEST_ID":335372086253950405034701080423806837631,"LEVEL_ID":299712008894515240349432973583165583501,"URGENCY_LEVEL":40,"TEST_NAME":"Apps should have particular set of builds","TEST_CODE":"APP_BUILDS","STANDARD_NAME":"Idiosyncratic","ACTIVE_YN":"Y","NT_NAME":"V_SVT_APEX__0_NT","QUERY_CLOB":"with std as (\r\n    select aa.application_id,\r\n       0 page_id,\r\n       null created_by,\r\n       null created_on,\r\n       coalesce (td.last_updated_by, do.last_updated_by) last_updated_by,\r\n       coalesce (td.last_updated_on, do.last_updated_on) last_updated_on,\r\n       case when td.build_option_name is null \r\n            then 'TO_DELETE_MISSING'\r\n            when do.build_option_name is null\r\n            then 'DEV_ONLY_MISSING'\r\n            else coalesce(td.child_code,do.child_code)\r\n            end child_code, \r\n       do.build_option_status do_build_option_status, \r\n       do.status_on_export    do_status_on_export,\r\n       td.build_option_status td_build_option_status, \r\n       td.status_on_export    td_status_on_export,\r\n\t     aa.workspace\r\n    from apex_applications aa\r\n    left join (select \r\n                  case when build_option_status != 'Include'\r\n                       then 'DEV_ONLY_EXCLUDED'\r\n                       when status_on_export != 'Exclude'\r\n                       then 'DEV_ONLY_INCLUDED'\r\n                       end child_code,\r\n                  application_id, \r\n                  build_option_name, \r\n                  build_option_status, \r\n                  status_on_export,\r\n                  last_updated_by,\r\n                  last_updated_on\r\n            from apex_application_build_options\r\n            where build_option_name = 'DEV_ONLY') do on aa.application_id = do.application_id\r\n    left join (select \r\n                  case when build_option_status = 'Include' or status_on_export = 'Include'\r\n                       then 'TO_DELETE_INCLUDED'\r\n                       end child_code,\r\n                  application_id, \r\n                  build_option_name, \r\n                  build_option_status, \r\n                  status_on_export,\r\n                  last_updated_by,\r\n                  last_updated_on\r\n            from apex_application_build_options\r\n            where build_option_name = 'TO_DELETE') td on aa.application_id = td.application_id\r\n    where aa.workspace = svt_preferences.get_preference ('SVT_DEFAULT_WORKSPACE')\r\n)\r\nselect case when std.child_code is not null\r\n            then 'N'\r\n            else 'Y'\r\n            end pass_yn,\r\n       std.application_id,\r\n       std.page_id,\r\n       std.created_by,\r\n       std.created_on,\r\n       std.last_updated_by,\r\n       std.last_updated_on,\r\n       case when std.child_code is not null\r\n            then apex_string.format('Application %0 %1',\r\n                                    p0 => std.application_id,\r\n                                    p1 => case when std.child_code = 'TO_DELETE_MISSING'\r\n                                               then 'is missing a `TO_DELETE` build option'\r\n                                               when std.child_code = 'DEV_ONLY_MISSING'\r\n                                               then 'is missing a `DEV_ONLY` build option'\r\n                                               when std.child_code = 'DEV_ONLY_EXCLUDED'\r\n                                               then 'has a misconfigured DEV_ONLY build - it has a build option status set to `Excluded`'\r\n                                               when std.child_code = 'DEV_ONLY_INCLUDED'\r\n                                               then 'has a misconfigured DEV_ONLY build - it has a status on export set to `included`'\r\n                                               when std.child_code = 'TO_DELETE_INCLUDED'\r\n                                               then 'has a misconfigured TO_DELETE build - at least one of the statuses is set to `included`'\r\n                                               end\r\n                                    )\r\n            end  validation_failure_message,\r\n       case when std.child_code is not null\r\n            then apex_string.format('Application %0 %1 (TO_DELETE status = %2, export = %3) (DEV_ONLY status = %4, export = %5)',\r\n                                    p0 => std.application_id,\r\n                                    p1 => case when std.child_code = 'TO_DELETE_MISSING'\r\n                                               then 'is missing a `TO_DELETE` build option'\r\n                                               when std.child_code = 'DEV_ONLY_MISSING'\r\n                                               then 'is missing a `DEV_ONLY` build option'\r\n                                               when std.child_code = 'DEV_ONLY_EXCLUDED'\r\n                                               then 'has a misconfigured DEV_ONLY build - it has a build option status set to `Excluded`'\r\n                                               when std.child_code = 'DEV_ONLY_INCLUDED'\r\n                                               then 'has a misconfigured DEV_ONLY build - it has a status on export set to `included`'\r\n                                               when std.child_code = 'TO_DELETE_INCLUDED'\r\n                                               then 'has a misconfigured TO_DELETE build - at least one of the statuses is set to `included`'\r\n                                               end,\r\n                                    p2 => coalesce(std.td_build_option_status, 'NA'),\r\n                                    p3 => coalesce(std.td_status_on_export, 'NA'),\r\n                                    p4 => coalesce(std.do_build_option_status, 'NA'),\r\n                                    p5 => coalesce(std.do_status_on_export, 'NA')\r\n                                    )\r\n            end issue_title,\r\n\t     std.child_code,\r\n       std.do_build_option_status,\r\n       std.do_status_on_export,\r\n       std.td_build_option_status,\r\n       std.td_status_on_export,\r\n\t\t\t std.application_id component_id,\r\n\t     null parent_component_id,\r\n\t\t\t std.workspace\r\nfrom std","STD_UPDATED_DATE":"2023-09-12T19:47:43.078462Z","SRC_RECENT_CHANGE_YN":"Y","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":1,"COMPONENT_NAME":"APEX_APPLICATIONS","EXPLANATION":"Apps should have 'dev\\_only' and 'to\\_delete' builds : \\* DEV\\_ONLY\\_EXCLUDED : The \\`DEV\\_ONLY\\` build option, as the name suggests should be \\`included\\` in the dev environment\r\n\r\n*   DEV\\_ONLY\\_INCLUDED : The \\`DEV\\_ONLY\\` build has been misconfigured to include the underlying on objects on export. It should be set to exclude on export.\r\n*   DEV\\_ONLY\\_MISSING : Apps should have a \\`DEV\\_ONLY\\` build which, as the name suggests, includes the underlying objects in the dev environment, but excludes it on export. This Â build option is used to flag components that are not ready for deployment\r\n*   TO\\_DELETE\\_INCLUDED : The \\`TO\\_DELETE\\` build has been misconfigured to include the underlying on objects. It should be set to exclude.\r\n*   TO\\_DELETE\\_MISSING : Apps should have a \\`TO\\_DELETE\\` build that excludes the underlying objects both in the dev environment and on export. This allows us to flag components that candidates for deletion without having to immediately delete them. If the component remains under this build for a long time, i~","FIX":"Correct the build option","VERSION_NUMBER":1,"WORKSPACE":"REDWOOD"}]    
