[{"STANDARD_ID":7837857267161810704439141202380776768,"TEST_ID":7943001359216404021651022932909270314,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Alphawave Views must be correctly named","TEST_CODE":"ALPH_VIEW_NAME","STANDARD_NAME":"DB Millenium Gen2 (19C)","ACTIVE_YN":"Y","NT_NAME":"V_SVT_DB_VIEW__0_NT","QUERY_CLOB":"select 'N' pass_yn, \r\n       ao.object_name view_name, \r\n       apex_string.format('View `%0` should be suffixed with `_V`',\r\n              p0 => ao.object_name) code,\r\n       ao.object_id unqid,\r\n\t\t\t ao.owner schema\r\nfrom v_user_objects ao\r\nwhere ao.object_name not like '%_V'\r\nand ao.object_type = 'VIEW'\r\nand ao.owner not in ('SVT','AST')","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":103,"COMPONENT_NAME":"DATABASE VIEW","EXPLANATION":"Views should have an \"\\_v\" suffix to the view name.","FIX":"Fix the view name","VERSION_NUMBER":1.3,"VERSION_DB":"REDWOOD","LIB_MD5":"Sybh7Ea-xLGogPpFP2TwCarCcDMHFoAjA2dhNlp3t0eQQARhfqbHRkGNdokEABngZhBADaSiYpuUI0RViWnckg","LIB_IMPORTED_VERSION":1.3,"PUBLISHED_YN":"Y","DOWNLOAD_CSS":"show t-Button t-Button--icon t-Button--simple","INHERITED_YN":"N","CALLING_STANDARD_NAME":"DB Millenium Gen2 (19C)"},{"STANDARD_ID":7837857267161810704439141202380776768,"TEST_ID":7948072800402596473603882098144601653,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Materialized Views should be named correctly","TEST_CODE":"ALPH_MV_NAME","STANDARD_NAME":"DB Millenium Gen2 (19C)","ACTIVE_YN":"Y","NT_NAME":"V_SVT_DB_MV__0_NT","QUERY_CLOB":"select 'N' pass_yn, \r\n       ao.object_name mv_name, \r\n       apex_string.format('Materialized View `%0` should be suffixed with `_MV`',\r\n                          p0 => ao.object_name) code,\r\n       ao.object_id unqid,\r\n\t\t\t ao.owner schema\r\nfrom v_user_objects ao\r\nwhere ao.object_type = 'MATERIALIZED VIEW'\r\nand ao.object_name not like '%_MV'\r\nand ao.owner not in ('SVT','AST')","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":361,"COMPONENT_NAME":"DATABASE MATERIALIZED VIEW","EXPLANATION":"Materialized Views should be suffixed with \\`\\_MV\\`","FIX":"Correct the MV name","VERSION_NUMBER":1.2,"VERSION_DB":"REDWOOD","LIB_MD5":"FAPnvNvAlscBbpaRtqc_aWiGEzvq8rPlQxqk6ej1gPhqdFQfVBFHTpi4KzyytS9efo5bjAAWHhwJQRTYG6de2g","LIB_IMPORTED_VERSION":1.2,"PUBLISHED_YN":"Y","DOWNLOAD_CSS":"show t-Button t-Button--icon t-Button--simple","INHERITED_YN":"N","CALLING_STANDARD_NAME":"DB Millenium Gen2 (19C)"},{"STANDARD_ID":7837857267161810704439141202380776768,"TEST_ID":8255822348603598426387853492531521988,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Use Char not Bytes","TEST_CODE":"USE_CHAR_NOT_BYTE","STANDARD_NAME":"DB Millenium Gen2 (19C)","ACTIVE_YN":"Y","NT_NAME":"V_SVT_DB_TBL__0_NT","QUERY_CLOB":"with oc as (select  utc.table_name, listagg( utc.column_name, ', ') within group (order by utc.column_name) col_list\r\n            from v_user_tab_cols utc\r\n            where  utc.char_used = 'B'\r\n            group by utc.table_name)\r\nselect 'N' pass_yn,\r\n       ao.object_name table_name, \r\n       ao.object_id unqid,\r\n       apex_string.format('The following columns in table `%0` are the wrong character set: `%1`', \r\n        p0 => ao.object_name,\r\n        p1 => oc.col_list) code,\r\n       ao.object_id,\r\n       oc.col_list,\r\n\t\t\t ao.owner schema\r\nfrom v_user_objects ao\r\ninner join oc on ao.object_name = oc.table_name\r\nwhere ao.object_type = 'TABLE'\r\nand ao.object_name not in (select mview_name\r\n                           from v_user_mviews)","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":102,"COMPONENT_NAME":"DATABASE TABLE","EXPLANATION":"You want to specify CHAR storage because it is more practical than BYTE storage (a single character can require several bytes)","FIX":"Alter the character set : `alter table t modify col_1 varchar2(xxx char);`","VERSION_NUMBER":1.2,"VERSION_DB":"REDWOOD","LIB_MD5":"ggnxyKAirQp8TOwqllseOLzC7zo3RT-wn7fCfefVhMkufkEVoiZKDMqf5HgqjJUqO8PG8UNl_GY73K-FU1XEag","LIB_IMPORTED_VERSION":1.2,"PUBLISHED_YN":"Y","DOWNLOAD_CSS":"show t-Button t-Button--icon t-Button--simple","INHERITED_YN":"N","CALLING_STANDARD_NAME":"DB Millenium Gen2 (19C)"},{"STANDARD_ID":7837857267161810704439141202380776768,"TEST_ID":8261264065791203730481270360346253301,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Use TIMESTAMP WITH TIME ZONE where appropriate","TEST_CODE":"USE_TS_W_TZ","STANDARD_NAME":"DB Millenium Gen2 (19C)","ACTIVE_YN":"Y","NT_NAME":"V_SVT_DB_TBL__0_NT","QUERY_CLOB":"with dt_ts as (select table_name, column_name, data_type, \r\n                case when data_type ='DATE'\r\n                     then 'N'\r\n                     when data_type like '%LOCAL%'\r\n                     then 'N'\r\n                     when data_type not like '%ZONE%'\r\n                     then 'N'\r\n                     else 'Y'\r\n                     end pass_yn\r\n            from v_user_tab_cols atc\r\n            where (data_type like '%TIMES%' or data_type  = 'DATE')\r\n        ),\r\n    lstag as (select table_name, listagg(column_name, ', ') within group (order by column_name) col_list\r\n                from dt_ts\r\n                where pass_yn = 'N'\r\n                group by table_name)\r\nselect 'N' pass_yn,\r\n       ao.object_name table_name, \r\n       ao.object_id unqid,\r\n       apex_string.format('The following columns in table `%0` should be changed to Timestamp with Local Time Zone : `%1`', \r\n        p0 => ao.object_name,\r\n        p1 => lstag.col_list) code,\r\n       ao.object_id,\r\n\t\t\t ao.owner schema\r\nfrom v_user_objects ao\r\ninner join lstag on ao.object_name = lstag.table_name\r\nwhere ao.object_type = 'TABLE'\r\nand ao.object_name not in (select mview_name\r\n                           from v_user_mviews)","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":102,"COMPONENT_NAME":"DATABASE TABLE","EXPLANATION":"In most cases using TIMESTAMP WITH TIME ZONE is the safest option, rather than using DATE or TIMESTAMP WITH LOCAL TIME ZONE.","FIX":"Change the column type : `alter table t modify col1 timestamp with time zone;`","VERSION_NUMBER":1.2,"VERSION_DB":"REDWOOD","LIB_MD5":"HoITnVeF_4QfYlbi61U4jnGk656CgDoULppqg4dWQND6aqjuqxatZwdj9z1lHG-OWS5LgJU8NJMvuiv5MOAA-Q","LIB_IMPORTED_VERSION":1.2,"PUBLISHED_YN":"Y","DOWNLOAD_CSS":"show t-Button t-Button--icon t-Button--simple","INHERITED_YN":"N","CALLING_STANDARD_NAME":"DB Millenium Gen2 (19C)"},{"STANDARD_ID":7837857267161810704439141202380776768,"TEST_ID":7815139285722760313678955543995360374,"LEVEL_ID":319367883342220103240397164810613715872,"URGENCY_LEVEL":30,"TEST_NAME":"Tables should have audit columns","TEST_CODE":"TBL_AUDIT_COLS","STANDARD_NAME":"DB Millenium Gen2 (19C)","ACTIVE_YN":"Y","NT_NAME":"V_SVT_DB_TBL__0_NT","QUERY_CLOB":"select case when utc.col_count is null\r\n            then 'N' \r\n            when utc.col_count < 4\r\n            then 'N' \r\n            else 'Y'\r\n            end pass_yn,\r\n       ao.object_name table_name,\r\n       ao.object_id unqid,\r\n       apex_string.format('Table `%0` is missing audit columns (`CREATED,CREATED_BY,UPDATED,UPDATED_BY`)', \r\n        p0 => ao.object_name) code,\r\n       ao.object_id,\r\n       coalesce(utc.col_count,0) col_count,\r\n\t\t\t ao.owner schema\r\nfrom v_user_objects ao\r\nleft outer join (select table_name, count(*) col_count\r\n                 from v_user_tab_cols\r\n                 where column_name in ('CREATED','CREATED_BY','UPDATED','UPDATED_BY')\r\n                 group by table_name\r\n                 ) utc on utc.table_name = ao.object_name\r\nwhere ao.object_type = 'TABLE'\r\nand ao.object_name not in (select mview_name\r\n                           from v_user_mviews)","MV_DEPENDENCY":null,"SVT_COMPONENT_TYPE_ID":102,"COMPONENT_NAME":"DATABASE TABLE","EXPLANATION":"The following standard columns must be defined on application tables (exceptions to be agreed), and represent what we would typically refer to as \"audit\" columns. These should be maintained by a trigger.\r\n\r\n*   CREATED\\_BY VARCHAR2(255 CHAR)\r\n*   CREATED\\_ON DATE\r\n*   UPDATED\\_BY VARCHAR2(255 CHAR)\r\n*   UPDATED\\_ONDATE","FIX":"Add the requisite audit columns","VERSION_NUMBER":1.2,"VERSION_DB":"REDWOOD","LIB_MD5":"EQqETbc6dwhtu2DdxjvTppWbMIf45ZmDviHiUFybh8rp-wKYDbr6brfs5Htb5aACTaEI--FZ2mV-cStyCHPzeA","LIB_IMPORTED_VERSION":1.2,"PUBLISHED_YN":"Y","DOWNLOAD_CSS":"show t-Button t-Button--icon t-Button--simple","INHERITED_YN":"N","CALLING_STANDARD_NAME":"DB Millenium Gen2 (19C)"}]    
