---
# ====== Page: Confirm Enabling Job ==========================
id: 32
identification: 
  name: Confirm Enabling Job
  alias: CONFIRM-ENABLING-JOB
  title: Confirm Enabling Job
  page-group: Administration # 10780320217725301324

appearance: 
  page-mode: Modal Dialog
  dialog-template: Wizard Modal Dialog # 7573653346823143970
  template-options: 
  - '#DEFAULT#'

dialog: 
  width: 500
  height: 300
  chained: true

navigation-menu: 
  override-user-interface-level: false

navigation: 
  cursor-focus: Do not focus cursor
  warn-on-unsaved-changes: false

css: 
  inline: |
    .acl-Info {
      display: block;
      overflow: hidden;
    }
    .acl-Info-statusBox,
    .acl-Info-usersBox {
      display: block;
      float: left;
      width: 50%;
    }
    .acl-Info-statusBox {
      text-align: center;
    }
    .acl-Info-heading {
      display: block;
      font-size: 16px;
      margin: 16px 16px 8px 16px;
      font-weight: bold;
      color: #404040;
    }
    .acl-Info-heading span {
      color: #707070;
      font-weight: normal;
    }
    .acl-Info-status {
      display: block;
      width: 50%;
      margin: 0 auto 8px auto;
      padding: 12px 0;
      border: 1px solid #D0D0D0;
      border-radius: 2px;
      font-size: 20px;
      line-height: 20px;
      color: #404040;
      font-weight: bold;
      background-color: #F0F0F0;
    }
    .authScheme .acl-Info-status {
      font-size: 16px;
      width: 70%
    }
    .acl-Info-status.is-enabled {
      background-color: #40C230;
      border-color: #37A62A;
      color: #FFF;
      text-shadow: 0 -1px 0 rgba(0,0,0,.25);
    }
    .acl-Info-status.is-disabled {
      background-color: #DE3038;
      border-color: #A0242A;
      color: #FFF;
      text-shadow: 0 -1px 0 rgba(0,0,0,.25);
    }
    .acl-Info-changeStatusLink {
      display: inline-block;
      padding: 8px 0;
      color: #404040;
      text-decoration: none;
      font-size: 11px;
      background-color: #F0F0F0;
      border: 1px solid #D0D0D0;
      margin: 0 16px 16px 16px;
      border-radius: 2px;
      width: 50%;
    }
    .acl-Info-changeStatusLink:hover {
      background-color: #fff;
      border-color: #C0C0C0;
      box-shadow: 0 1px 1px rgba(0,0,0,.15);
    }
    .acl-Info-changeStatusLink:active {
      background-color: #E0E0E0;
      border-color: #C0C0C0;
      box-shadow: 0 1px 1px rgba(0,0,0,.25) inset;
    }
    .acl-Info-users {
      margin: 0;
      list-style: none;
      padding: 0;
      margin: 0;
      border-left: 1px solid #F0F0F0;
    }
    .acl-Info-user {
      border-top: 1px solid #F0F0F0;
    }
    .acl-Info-userLink {
      text-decoration: none;
      display: block;
      padding: 8px;
    }
    .acl-Info-userLink:hover {
      background-color: #689AD8;
    }
    .acl-Info-user:first-child {
      border-top: none;
    }
    .acl-Info-userType,
    .acl-Info-userCount {
      display: block;
      font-size: 14px;
    }
    .acl-Info-userType {
      font-weight: bold;
      float: left;
      margin-right: 8px;
      line-height: 32px;
    }
    .acl-Info-userLink:hover .acl-Info-userType {
      color: #FFF;
    }
    .acl-Info-userCount {
      display: block;
      overflow: hidden;
      text-align: right;
    }
    .acl-Info-userCount span {
      display: inline-block;
      padding: 8px;
      background-color: #F8F8F8;
      color: #404040;
      line-height: 16px;
      min-width: 36px;
      text-decoration: none;
      text-align: right;
      border-radius: 2px;
    }
    .acl-Info-desc {
        padding: 16px;
        border-top: 1px solid #E0E0E0;
        border-bottom: 1px solid #E0E0E0;
        background: #F8F8F8;
        font-size: 14px;
        clear: both;
    }
    .acl-Info-desc>p:last-child {
      margin-bottom: 0;
    }
    

security: 
  authorization-scheme: ADMINISTRATION RIGHTS # 10780232806617370804
  authentication: Page Requires Authentication
  deep-linking: Disabled
  page-access-protection: Arguments Must Have Checksum
  form-auto-complete: Off
  browser-cache: Application Default

session-management: 
  rejoin-sessions: Disabled

advanced: 
  enable-duplicate-page-submissions: No - Prevent page from being re-posted
  reload-on-submit: Always

server-cache: 
  caching: Disabled

configuration: 
  build-option: TO_DELETE # 6157992149575072830

regions: 
- # ====== Region: Confirm Enabling Job ========================
  id: 7088405382641136581
  identification: 
    title: Confirm Enabling Job
    type: Static Content

  source: 
    html-code: <p>Click Start to schedule the automated testing job. Tests will continue to be run as needed when users navigate the application, but running the automated job will help to ensure that users do not encounter unnecessary delays.</p>

  layout: 
    sequence: 10
    parent-region: No Parent
    position: BODY
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Blank with Attributes # 7573656657747143975
    template-options: 
    - '#DEFAULT#'
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    static-id: confirmEnableJob
    region-display-selector: false
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

- # ====== Region: Buttons =====================================
  id: 7094082966274085131
  identification: 
    title: Buttons
    type: Static Content

  layout: 
    sequence: 20
    parent-region: No Parent
    position: REGION_POSITION_03
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    template: Buttons Container # 7573656789854143977
    template-options: 
    - '#DEFAULT#'
    - t-ButtonRegion--noUI
    render-components: Above Content

  accessibility: 
    use-landmark: true
    landmark-type: Template Default

  advanced: 
    region-display-selector: true
    exclude-title-from-translation: false

  server-cache: 
    caching: Disabled

  customization: 
    customizable: Not Customizable By End Users

  attributes: 
    settings: 
      output-as: HTML
      expand-shortcuts: false

page-items: 
- # ====== Page Item: P32_JOB_STATUS ===========================
  id: 6392808792854828756
  identification: 
    name: P32_JOB_STATUS
    type: Hidden

  settings: 
    value-protected: true

  layout: 
    sequence: 10
    region: Confirm Enabling Job # 7088405382641136581
    position: BODY

  advanced: 
    warn-on-unsaved-changes: Page Default

  source: 
    type: Null
    used: Only when current value in session state is null

  session-state: 
    data-type: VARCHAR2
    storage: Per Session (Persistent)

  security: 
    session-state-protection: Unrestricted
    store-value-encrypted-in-session-state: false
    restricted-characters: All characters can be saved.

buttons: 
- # ====== Button: ENABLE_SCHEDULED_JOB ========================
  id: 7088405813244136581
  identification: 
    button-name: ENABLE_SCHEDULED_JOB
    label: Start

  layout: 
    sequence: 20
    region: Buttons # 7094082966274085131
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text with Icon # 7573687401426144051
    hot: true
    template-options: 
    - '#DEFAULT#'
    - t-Button--iconLeft
    icon: fa-play

  behavior: 
    action: Submit Page
    execute-validations: true
    warn-on-unsaved-changes: Do Not Check

  server-side-condition: 
    type: Item = Value
    item: P32_JOB_STATUS
    value: Disabled

  security: 
    authorization-scheme: ADMINISTRATION RIGHTS # 10780232806617370804

- # ====== Button: CANCEL ======================================
  id: 7648216224311058715
  identification: 
    button-name: CANCEL
    label: Cancel

  layout: 
    sequence: 10
    region: Buttons # 7094082966274085131
    position: NEXT
    start-new-layout: false
    start-new-row: true
    column: Automatic
    new-column: true
    column-span: Automatic

  appearance: 
    button-template: Text # 7573688007377144053
    hot: false
    template-options: 
    - '#DEFAULT#'

  behavior: 
    action: Defined by Dynamic Action
    execute-validations: true

dynamic-actions: 
- # ====== Dynamic Action: Cancel Modal ========================
  id: 6345263460805937934
  identification: 
    name: Cancel Modal

  execution: 
    sequence: 10

  when: 
    event: EVENT.EVENT.BROWSER.CLICK
    selection-type: Button
    button: CANCEL # 7648216224311058715

  execution: 
    event-scope: Static
    type: Immediate

  actions: 
  - # ====== Action: Cancel Dialog ===============================
    id: 6345263533107937935
    identification: 
      action: Cancel Dialog

    execution: 
      sequence: 10
      event: Cancel Modal # 6345263460805937934
      fire-when-event-result-is: True
      fire-on-initialization: false

computations: 
- # ====== Computation: P32_JOB_STATUS =========================
  id: 6392808880075828757
  identification: 
    item-name: P32_JOB_STATUS

  execution: 
    sequence: 10
    point: Before Header

  computation: 
    type: SQL Query (return single value)
    sql-query: |
      select
          decode(enabled, 'TRUE', 'Enabled', 'Disabled') as status
      from user_scheduler_jobs
      where job_name = 'EBA_STDS_TEST_UPD_JOB'

processes: 
- # ====== Process: Enable Automated Testing ===================
  id: 7088407397972136584
  identification: 
    name: Enable Automated Testing
    type: Execute Code
    execution-chain: None

  source: 
    location: Local Database
    language: PL/SQL
    pl/sql-code: |
      declare
          l_stmt varchar2(1000);
      begin
          if :P32_JOB_STATUS is null then
              -- Need to register the job before we can start it.
              eba_stds.register_job();
          end if;
      
          l_stmt := q'[begin #PKG#.enable( name => 'EBA_STDS_TEST_UPD_JOB'); end;]';
          for c1 in ( select object_name
                      from sys.all_objects
                      where object_name in ('DBMS_SCHEDULER', 'CLOUD_SCHEDULER')
                          and object_type = 'PACKAGE'
                      order by object_name desc )
          loop
              execute immediate replace(l_stmt, '#PKG#', sys.dbms_assert.enquote_name(c1.object_name, false));
              return;
          end loop;
      end;

  execution: 
    sequence: 20
    point: Processing
    run-process: Once Per Page Visit (default)

  success-message: 
    success-message: Automated testing job enabled.

  error: 
    display-location: Inline in Notification

  server-side-condition: 
    when-button-pressed: ENABLE_SCHEDULED_JOB # 7088405813244136581

  security: 
    authorization-scheme: ADMINISTRATION RIGHTS # 10780232806617370804

branches: 
- # ====== Branch: Back to Admin ===============================
  id: 6392809173721828760
  identification: 
    name: Back to Admin

  execution: 
    sequence: 10
    point: After Processing

  behavior: 
    type: Page or URL (Redirect)
    target: 
      url: 'f?p=&APP_ID.:4:&SESSION.::&DEBUG.:NONE::&success_msg=#SUCCESS_MSG#'
      page: 4 # General Administration
      clear-cache: NONE

  security: 
    authorization-scheme: ADMINISTRATION RIGHTS # 10780232806617370804

